[Rainmeter]
Update=100
DefaultUpdateDivider=-1

[Metadata]
Author=creewick
Version=0.4 beta
License=CC BY-NC-SA 4.0

[Variables]
WidgetName=Volume
WidgetSize=medium
MouseX=0
@include1=#@#Components\WidgetBase.inc
@include2=Volume.inc

[BackgroundMeter]
MouseScrollUpAction=[!CommandMeasure VolumeMeasure "ChangeVolume +2"][!UpdateMeterGroup Meters][!Redraw]
MouseScrollDownAction=[!CommandMeasure VolumeMeasure "ChangeVolume -2"][!UpdateMeterGroup Meters][!Redraw]

[VolumeIcon]
Meter=Image
Group=Meters
ImageName=#@#Images\Widgets\Volume\Volume[VolumeLevel].png
ImageTint=#ForegroundColor#
DynamicVariables=1
X=(#WidgetPadding#+#WidgetWidth#*0.32)
Y=(#WidgetPadding#+#WidgetHeight#*0.15)
W=(#WidgetHeight#*0.4)
LeftMouseUpAction=[!CommandMeasure VolumeMeasure "ToggleMute"][!UpdateMeterGroup Meters][!Redraw]

[VolumeName]
Meter=String
Group=Meters
AntiAlias=1
Text=[VolumeMeasure]
FontFace=#FontFace#
FontColor=#ForegroundColor#
SolidColor=#BackgroundColor#
FontSize=(#WidgetHeight#*0.07)
DynamicVariables=1
StringAlign=Center
X=(#WidgetPadding#+#WidgetWidth#*0.5)
Y=(#WidgetPadding#+#WidgetHeight#*0.65)
LeftMouseUpAction=[!CommandMeasure VolumeMeasure "ToggleNext"][!UpdateMeterGroup Meters][!Redraw]

[VolumeMeter]
Meter=Shape
Group=Meters
Shape=Rectangle 0,0,(#WidgetWidth#*0.008*[VolumeMeasure:]),(#WidgetHeight#*0.04) | Fill Color #ForegroundColor# | StrokeWidth 0
Shape2=Rectangle (#WidgetWidth#*0.05),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape3=Rectangle (#WidgetWidth#*0.10),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape4=Rectangle (#WidgetWidth#*0.15),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape5=Rectangle (#WidgetWidth#*0.20),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape6=Rectangle (#WidgetWidth#*0.25),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape7=Rectangle (#WidgetWidth#*0.30),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape8=Rectangle (#WidgetWidth#*0.35),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape9=Rectangle (#WidgetWidth#*0.40),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape10=Rectangle (#WidgetWidth#*0.45),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape11=Rectangle (#WidgetWidth#*0.50),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape12=Rectangle (#WidgetWidth#*0.55),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape13=Rectangle (#WidgetWidth#*0.60),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape14=Rectangle (#WidgetWidth#*0.65),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape15=Rectangle (#WidgetWidth#*0.70),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape16=Rectangle (#WidgetWidth#*0.75),0,1,(#WidgetHeight#*0.04)|Fill Color #BackgroundColor#|StrokeWidth 0
Shape17=Rectangle 0,0,(#WidgetWidth#*0.80),(#WidgetHeight#*0.04)|Fill Color #GrayColor#|StrokeWidth 0
ShapeTotal=Combine Shape|Union Shape2|Union Shape3|Union Shape4|Union Shape5|Union Shape6|Union Shape7|Union Shape8|Union Shape9|Union Shape10|Union Shape11|Union Shape12|Union Shape13|Union Shape14|Union Shape15|Union Shape16
LeftMouseDownAction=[!SetVariable MouseX $MouseX$][!UpdateMeasure SetVolumeWithMouse]
DynamicVariables=1
X=(#WidgetPadding#+#WidgetHeight#*0.1)
Y=(#WidgetPadding#+#WidgetHeight#*0.85)
Hidden=([VolumeLevel]=-1)

[SetVolumeWithMouse]
Measure=Calc
Formula=(#MouseX#/(0.8*#WidgetWidth#)*100)
DynamicVariables=1
OnChangeAction=[!CommandMeasure VolumeMeasure "SetVolume [SetVolumeWithMouse]"]